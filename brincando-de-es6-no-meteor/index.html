<!DOCTYPE html><html lang="en" manifest="/manifest.appcache" xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"><head><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/><meta charset="utf-8"/><title>Brincando de ES6 no Meteor | Underground WebDev</title><meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#BA2D27"/><meta name="apple-mobile-web-app-title" content="UDGWebDev"/><meta name="msapplication-TileImage" content="https://udgwebdev.com/images/undefined-128.png"/><meta name="msapplication-TileColor" content="#BA2D27"/><meta name="msapplication-tap-highlight" content="no"/><meta name="mobile-web-app-capable" content="yes"/><meta name="application-name" content="UDGWebDev"/><meta name="theme-color" content="#BA2D27"/><meta name="title" content="Brincando de ES6 no Meteor"/><meta name="author" content="Caio Ribeiro Pereira"/><meta name="description" content="Neste post mostrarei como utilizar alguns recursos legais do ES6 (aka ES2015) em um projeto Meteor de versão 1.2 ou superior, pelo qual nessas versões essa implementação já se encontra nativo no Meteor."/><meta property="og:title" content="Brincando de ES6 no Meteor"/><meta property="og:description" content="Neste post mostrarei como utilizar alguns recursos legais do ES6 (aka ES2015) em um projeto Meteor de versão 1.2 ou superior, pelo qual nessas versões essa implementação já se encontra nativo no Meteor."/><meta property="og:url" content="https://udgwebdev.com/brincando-de-es6-no-meteor"/><meta property="og:site_name" content="Underground WebDev"/><meta property="og:image" content="https://udgwebdev.com/images/meteor-logo.jpg"/><meta property="og:type" content="website"/><meta property="article:author" content="https://plus.google.com/+CaioRibeiroPereira"/><meta property="article:section" content="main"/><meta name="twitter:creator" content="@crp_underground"/><meta name="twitter:card" content="summary"/><meta name="twitter:url" content="https://udgwebdev.com/brincando-de-es6-no-meteor"/><meta name="twitter:title" content="Brincando de ES6 no Meteor"/><meta name="twitter:description" content="Neste post mostrarei como utilizar alguns recursos legais do ES6 (aka ES2015) em um projeto Meteor de versão 1.2 ou superior, pelo qual nessas versões essa implementação já se encontra nativo no Meteor."/><meta name="twitter:image" content="https://udgwebdev.com/images/meteor-logo.jpg"/><link rel="manifest" href="/manifest.json"/><link rel="stylesheet" href="/assets/css/main.css" type="text/css"/><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/><link rel="canonical" href="https://udgwebdev.com/brincando-de-es6-no-meteor"/></head><body><nav role="navigation" class="navbar navbar-inverse navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand"><img src="/images/udgwebdev-logo.png" alt="Underground WebDev" width="48" class="navbar-logo"/></a></div><div class="navbar-right navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href="/nodejs"><i class="fa fa-code"></i>&nbsp;Node.js</a></li><li><a href="/meteor"><i class="fa fa-code"></i>&nbsp;Meteor</a></li><li><a href="/dicas-de-terminal"><i class="fa fa-terminal"></i>&nbsp;Terminal</a></li></ul></div></div></nav><nav role="navigation" class="c-circle-menu js-menu"><button class="c-circle-menu__toggle js-menu-toggle"><span>Toggle</span></button><ul class="c-circle-menu__items"><li class="c-circle-menu__item"><a href="http://feeds.feedburner.com/UndergroundWebDev" target="_blank" rel="nofollow" title="Feed" class="c-circle-menu__link"><i class="icon fa fa-rss"></i></a></li><li class="c-circle-menu__item"><a href="https://github.com/caio-ribeiro-pereira" target="_blank" rel="nofollow" title="Github" class="c-circle-menu__link"><i class="icon fa fa-github"></i></a></li><li class="c-circle-menu__item"><a href="https://www.facebook.com/udgwebdev" target="_blank" rel="nofollow" title="Fanpage" class="c-circle-menu__link"><i class="icon fa fa-facebook-square"></i></a></li><li class="c-circle-menu__item"><a href="http://twitter.com/crp_underground" target="_blank" rel="nofollow" title="Twitter" class="c-circle-menu__link"><i class="icon fa fa-twitter-square"></i></a></li><li class="c-circle-menu__item"><a href="https://www.linkedin.com/in/caioribeiropereira" target="_blank" rel="nofollow" title="LinkedIn" class="c-circle-menu__link"><i class="icon fa fa-linkedin-square"></i></a></li></ul><div class="c-circle-menu__mask js-menu-mask"></div></nav><main role="main" class="container vertical-centralization"><div class="row"><article id="brincando-de-es6-no-meteor" class="col-xs-12 col-sm-9 post"><h1>Brincando de ES6 no Meteor</h1><p class="text-muted">Publicação: <time datetime="05/01/2016" pubdate><b>05/01/2016</b></time> | Tags: <a href="/menu/#meteor" rel="me" title="Menu: Meteor">Meteor</a></p><p><img src="/images/meteor-logo.jpg" alt="Brincando de ES6 no Meteor" title="Brincando de ES6 no Meteor"></p>
<p>De volta a ativa no blog, hoje mostrarei como utilizar alguns recursos legais do ES6 em um projeto Meteor de versão 1.2 ou superior, pelo qual nessas versões o ES6 já esta nativo para uso.</p>
<h2>Use const ou let no lugar de var</h2><p>Agora no ES6 é possível criar constantes (<code>const</code>), que é um tipo de variável imutável, ou seja, você define uma única vez o valor de uma constante e nunca mais poderá mudar seu valor, aplicar esse recurso faz seu sistema utilizar menos memória, e toda vez que precisar criar uma variável mutável utilize o <code>let</code> no lugar do antigo <code>var</code>, outro detalhe importante é que ambos <code>const</code> e <code>let</code> são <strong>blocked-scoped</strong> e isso impedirá que a variável escape de seu escopo atual, evitando problemas de <a href="http://www.sitepoint.com/demystifying-javascript-variable-scope-hoisting/">scope e hoisting</a>. Veja um exemplo:</p>
<h4>Usando var</h4><pre><code class="language-javascript"> for (var i = 1; i &lt; 3; i++) {
   Meteor.setTimeout(function () {
     console.log(i);
   }, 0); // 3 3 3 - Bug estranho!
 }
 console.log(i); // 3 - A variável i vazou de seu escopo
</code></pre>
<h4>Usando let</h4><pre><code class="language-javascript"> for (let i = 1; i &lt; 3; i++) {
   Meteor.setTimeout(function () {
     console.log(i);
   }, 0); // 1 2 3 - Agora o resultado veio correto!
 }
 console.log(i); // undefined
</code></pre>
<h2>Use arrow-function no lugar de var self = this</h2><p>O recurso <strong>arrow-function</strong> é sensacional! Além de encurtar o código na declaração de funções e funções callback substituindo a keyword <code>function() {}</code> por <code>() =&gt; {}</code>, ele permite compartilhar através do <code>this</code> atributos e funções entre uma função pai com uma função filha, removendo o workaround de criar uma varíavel com o estado do objeto pai (<code>var self = this;</code>). Veja o exemplo:</p>
<h4>Sem arrow-function</h4><pre><code class="language-javascript"> Template.dashboard.onRendered(function() {
   this.msg = &quot;Ola!&quot;;
   var self = this;
   Meteor.setTimeout(function() {
     console.log(self.msg);
   }, 1000);
 });
</code></pre>
<h4>Com arrow-function</h4><pre><code class="language-javascript"> Template.dashboard.onRendered(() =&gt; {
   this.msg = &quot;Ola!&quot;;
   Meteor.setTimeout(() =&gt; {
     console.log(this.msg);
   }, 1000);
 });
</code></pre>
<p><strong>Obs.:</strong> Atenção na versão Meteor 1.2 existe um bug que não permite usar <strong>arrow-function</strong> dentro da função <code>Meteor.publish()</code>, fazendo com que <code>this.userId</code> retorne <code>undefined</code>.</p>
<h2>Template Strings</h2><p>Template strings é um outro recurso bem legal, que ao invés de concatenar strings com variáveis, você simplesmente interpola as variáveis dentro da string, deixando-as mais elegante e legível. Para usá-lo, basta declarar uma string entre crases <code>(</code>String<code>)</code> e a interpolação das variáveis é feita através da <code>${variavel}</code>, veja um exemplo:</p>
<h4>Concatenando string</h4><pre><code class="language-javascript"> var ano = 2016;
 console.log(&quot;Feliz &quot; + ano + &quot;!&quot;);
</code></pre>
<h4>Interpolando string</h4><pre><code class="language-javascript"> var ano = 2016;
 console.log(`Feliz ${ano}!`);
</code></pre>
<h2>Object Method</h2><p>Object methods é apenas um <strong>syntax sugar</strong>, um encurtador de declaração de funções bem útil e facil de aplicar, veja:</p>
<h4>Sem object method</h4><pre><code class="language-javascript"> Template.body.helpers({
   users: function() {
     return Meteor.users.find({});
   }
 });
</code></pre>
<h4>Com object method</h4><pre><code class="language-javascript"> Template.body.helpers({
   users() {
     return Meteor.users.find({});
   }
 });
</code></pre>
<h2>Criando Classes</h2><p>Agora no ES6 você pode criar classes, deixando seu projeto mais orientado à objetos, no Meteor é possível fazer isso também, porém a maneira como você exporta uma classe no Meteor, ficou um pouco estranha devido ao seu contexto, veja:</p>
<pre><code class="language-javascript"> Cliente = class Cliente {
   constructor(nome) {
     this.nome = nome;
   }
 }
</code></pre>
<p><strong>Obs.:</strong> Se você deixar apenas <code>class Cliente</code> ela não será global, impossibilitando seu uso em outros pontos da aplicação, como solução workaround você terá que declarar estranhamente <code>Cliente = class Cliente</code> para que seja criado uma variável global dessa classe.</p>
<p>Por enquanto é isso pessoal, feliz ano novo, até a próxima!</p>
<h4>Boas referêcias:</h4><ul>
<li><a href="http://info.meteor.com/blog/es2015-get-started">Get started with ES2015 (ES6) and Meteor</a></li>
<li><a href="https://medium.com/@dferber90/real-world-es6-examples-in-meteor-a834c6073daa">Real-World ES6 Examples in Meteor</a></li>
</ul><div id="disqus_thread"></div><script async="async" defer="defer">(function() {
  var disqus_shortname = 'udgwebdev';
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript>Por favor, habilite o JavaScript no seu browser para visualizar os comentários deste post.</noscript><script type="application/ld+json">{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Brincando de ES6 no Meteor",
  "image": "https://udgwebdev.com/images/meteor-logo.jpg",
  "publisher": "Underground WebDev",
  "url": "https://udgwebdev.com/brincando-de-es6-no-meteor",
  "datePublished": "2016-01-05",
  "dateCreated": "2016-01-05",
  "description": "Neste post mostrarei como utilizar alguns recursos legais do ES6 (aka ES2015) em um projeto Meteor de versão 1.2 ou superior, pelo qual nessas versões essa implementação já se encontra nativo no Meteor.",
  "author": {
    "@type": "Person",
    "name": "Caio Ribeiro Pereira"
  }
}</script></article></div></main><footer class="footer text-center"><p><small><i class="fa fa-trophy"></i>&nbsp;Powered by <a href="https://pages.github.com" rel="nofollow" target="_blank" title="Github Pages">Github Pages</a>, <a href="http://gruntjs.com" rel="nofollow" target="_blank" title="Grunt">Grunt</a> and <a href="http://harpjs.com" rel="nofollow" target="_blank" title="Harp.js">Harp.js</a>.</small><br/><small>Autor: <a href="https://crpwebdev.github.io" rel="me" target="_blank" title="Caio Ribeiro Pereira">Caio Ribeiro Pereira</a>.</small></p></footer><script src="/assets/js/circlemenu.min.js"></script><script src="/assets/js/main.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-25728091-2', 'auto');
ga('send', 'pageview');</script></body></html>