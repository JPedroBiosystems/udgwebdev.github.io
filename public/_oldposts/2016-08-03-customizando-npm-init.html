---
layout: post
title: Customizando npm init
tags: Node.js
keywords: Node.js, NPM
published: true
description: Veja nesse post como modificar o resultado do comando npm init para automatizar a geração de package.json com dados customizados.
image_url: npm-logo.png
---
<figure class="post-image">
  <img src="{{ site.url }}/images/npm-logo.png" width="250" height="97" alt="Customizando npm init" title="Customizando npm init">
</figure>
<div class="post-content">
  <p>Para quem não conhece esse comando, o <code>npm init</code> apresenta um simples questionário para descrever informações básica de um módulo Node.js, pelo qual seu resultado final é gerar o arquivo <code>package.json</code>.</p>

  <p>Porém, é possível customizar o resultado desse comando, incrementando novas informações para agilizar na geração do <code>package.json</code> a cada novo projeto. Para fazer essa simples customização, basta criar na pasta raíz de usuário do sistema o arquivo: <code>~/.npm-init.js</code>, nele você pode injetar valores pré-definidos para alguns campos chaves na geração de um <code>package.json</code>, veja esse exemplo:</p>

{% highlight javascript %}
exports.name = prompt('Name', basename);
exports.description = prompt('Description', '');
exports.version = prompt('Version', config.get('init-version'));
exports.main = config.get('main-file');
exports.license = config.get('init-license');
exports.author = config.get('init-author-name') + '<'+config.get('init-author-email')+'>';
exports.scripts = {
  start: 'node ' + config.get('main-file'),
  prestart: 'npm install'
};
exports.engines = {
  node: '>= 4.4.7',
  npm: '>= 2.15.8'
};
{% endhighlight %}

  <p>Cada <code>exports.chave</code> é referente a um atributo a ser incluído no <code>package.json</code>.<br>
    Outro detalhe mais legal, é que é possível deixar algumas das principais perguntas já respondidas com valores default, para isso basta editar o arquivo <code>~/.npmrc</code>, incluindo nele algums campos, como por exemplo:</p>

{% highlight bash %}
init-license='MIT'
init-author-name='Caio Ribeiro Pereira'
init-author-email='caio.ribeiro.pereira@gmail.com'
init-version='0.0.1'
main-file='index.js'
{% endhighlight %}

  <p>Com isso, praticamente você nem terá mais que responder as principais perguntas, pois elas já serão pré-definidas pelos valores existentes no <code>~/.npmrc</code>, tanto é que elas são acessadas magicamente pela função <code>config.get('nome-de-uma-key')</code>.</p>

  <p>Agora se você criar um novo projeto e rodar o comando <code>npm init</code> você terá um resultado semelhante a este:</p>

  <figure class="post-image">
    <a href="{{ site.url }}/images/npm-init.png" target="_blank">
      <img src="{{ site.url }}/images/npm-init-small.png" width="250" height="214" alt="Clique na imagem para ampliar" title="Clique na imagem para ampliar">
      <figcaption>
        Clique na imagem para ampliar
      </figcaption>
    </a>
  </figure>
  <p>See you in the next post!</p>
</div>
