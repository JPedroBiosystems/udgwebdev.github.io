---
layout: post
title: Trabalhando com validators no Node.js
tags: Node.js
keywords: Validators, Node.js, Validando dados com Node.js, Validações com Node.js
published: true
description: Trabalhar com validators é muito importante no tratamento de dados, pois ele mantém o projeto organizado e padronizado, evitando ifs e elses
---
<figure class="post-image">
  <img src="{{ site.url }}/images/nodejs-logo.jpg" width="250" height="86" alt="Validators no Node.js" title="Validators no Node.js">
  <figcaption>Validators no Node.js</figcaption>
</figure>
<div class="post-content">
  <p>Trabalhar com validators é algo muito importante no desenvolvimento de uma aplicação web, pois ele mantém o projeto organizado e padronizado, evitando a utilização de comandos <strong>if e else</strong> como validadores de dados.</p>
  <p>No mundo Java, existem diversos frameworks como <a href="http://vraptor.caelum.com.br/" title="VRaptor" target="_blank">VRaptor</a>, <a href="http://struts.apache.org/" title="Struts" target="_blank">Struts</a>, <a href="http://www.springsource.org/" title="Spring" target="_blank">Spring</a>, <a href="http://www.hibernate.org/" title="Hibernate" target="_blank">Hibernate</a> com validators.</p>
  <p>No Ruby, <a href="http://www.sinatrarb.com/" title="Sinatra" target="_blank">Sinatra</a> e <a href="http://rubyonrails.org/" title="Ruby On Rails" target="_blank">Rails</a> possuem validators nativos.</p>
  <p>Agora, e no mundo <a href="http://nodejs.org/" title="Node.js" target="_blank">Node.js</a>, existem validators? Sim!</p>
  <p>O <a href="http://geddyjs.org/" title="Geddy" target="_blank">Geddy</a> possui validators nativos, porém atualmente o <a href="http://expressjs.com/" title="ExpressJS" target="_blank">Express</a> não, mas já existem módulos de terceiro que cumpre esse papel para ele. Até para quem utiliza banco de dados <a href="http://www.mongodb.org/" title="MongoDB" target="_blank">MongoDB</a>, existe um módulo chamado <a href="http://mongoosejs.com/" title="MongooseJS" target="_blank">Mongoose</a>, que permite modelar sua base de dados e toda modelagem pode incluir validators também.</p>
  <p>Praticamente toda plataforma de programação possui um framework para validação de dados.</p>
  <p>Para trabalhar com Node.js recomendo o módulo <strong>node-validator</strong> ou <strong>express-validator</strong>.</p>
  <p>Ele possui funções tanto para validações quanto tratamento de dados, é um ótimo framework e as validações são integradas nas requests da sua aplicação.</p>
  <p>O <strong>Node-Validator</strong> é uma biblioteca perfeita para validação, filtragem e tratamento de dados.</p>
  <p>Com ele é possível verificar desde a validação de campos como <strong>email, ip, data, url</strong> até o tratamento de possíveis <strong>ataques de XSS (Cross-site scripting)</strong> em seus parâmetros. Veja um exemplo utilizando o <strong>Express-Validator</strong>:</p>

  {% include content-ads.ext %}

<h4>Formulário html</h4>
{% highlight html %}
<form action="/cadastro" method="post">
Nome: <input type="text" name="usuario[nome]">
Email: <input type="text" name="usuario[email]">
Idade: <input type="text" name="usuario[idade]">
<button type="submit">Enviar</button>
</form>
{% endhighlight %}

<h4>Servidor que receberá os dados do formulário</h4>
{% highlight javascript %}
var express = require('express')
  , expressValidator = require('express-validator')
  , app = express();

app.use(express.bodyParser());
app.use(expressValidator);

app.post('/cadastro', function(req, res) {
  // Array de erros para feedback do servidor.
  var errors = [];
  // Evento para capturar mensagens de erros e adicioná-las ao array de erros.
  req.onValidationError(function(erro) {
    console.log('Validation error: ' + erro);
    errors.push(erro);
    return this;
  });

  // Dados do formulário submetido.
  var usuario = req.body.usuario;

  // Validando dados.
  req.assert(usuario.idade, 'Idade esta vazio').isEmpty();
  req.assert(parseInt(usuario.idade), 'Menor de idade').min(18);
  req.assert(usuario.nome, 'Nome esta vazio').isEmpty();
  req.assert(usuario.email, 'Email invalido').isEmail();

  // Preparando mensagem de sucesso e erro.
  if (errors.length) {
    res.send('Erros: ' + errors.join(', '), 500);
  }else{
    res.send('Dados validado com sucesso', 200);
  }
});
app.listen(8888);
{% endhighlight %}

  <p>Também é possível utilizar seus métodos no client-side da aplicação, para isso basta incluir o <a href="https://github.com/chriso/node-validator/blob/master/validator-min.js" title="Validator no Client-Side" target="_blank">validator-min.js</a>.</p>
  <p>Para conhecer todos os recursos e principalmente o próprio projeto segue abaixo os links desse módulo:</p>

  <ul>
    <li><a href="https://github.com/chriso/node-validator" title="https://github.com/chriso/node-validator" rel="nofollow" target="_blank">Github do node-validator</a></li>
    <li><a href="https://github.com/ctavan/express-validator" title="https://github.com/ctavan/express-validator" target="_blank" rel="nofollow">Github do express-validator</a></li>
  </ul>
  <p>Então é isso pessoal, fica ai a dica e até a próxima!</p>
</div>
