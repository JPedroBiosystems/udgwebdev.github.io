<!DOCTYPE html><html lang="en" manifest="/manifest.appcache" xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"><head><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/><meta charset="utf-8"/><title>Otimizando aplicações Node.js | Underground WebDev</title><meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#BA2D27"/><meta name="apple-mobile-web-app-title" content="UDGWebDev"/><meta name="msapplication-TileImage" content="https://udgwebdev.com/images/undefined-128.png"/><meta name="msapplication-TileColor" content="#BA2D27"/><meta name="msapplication-tap-highlight" content="no"/><meta name="mobile-web-app-capable" content="yes"/><meta name="application-name" content="UDGWebDev"/><meta name="theme-color" content="#BA2D27"/><meta name="title" content="Otimizando aplicações Node.js"/><meta name="author" content="Caio Ribeiro Pereira"/><meta name="description" content="Neste post apresentarei 10 dicas extremamente úteis para você aplicar em uma aplicação Node.js em produção."/><meta property="og:title" content="Otimizando aplicações Node.js"/><meta property="og:description" content="Neste post apresentarei 10 dicas extremamente úteis para você aplicar em uma aplicação Node.js em produção."/><meta property="og:url" content="https://udgwebdev.com/otimizando-aplicacoes-nodejs"/><meta property="og:site_name" content="Underground WebDev"/><meta property="og:image" content="https://udgwebdev.com/images/nodejs-logo.jpg"/><meta property="og:type" content="website"/><meta property="article:author" content="https://plus.google.com/+CaioRibeiroPereira"/><meta property="article:section" content="main"/><meta name="twitter:creator" content="@crp_underground"/><meta name="twitter:card" content="summary"/><meta name="twitter:url" content="https://udgwebdev.com/otimizando-aplicacoes-nodejs"/><meta name="twitter:title" content="Otimizando aplicações Node.js"/><meta name="twitter:description" content="Neste post apresentarei 10 dicas extremamente úteis para você aplicar em uma aplicação Node.js em produção."/><meta name="twitter:image" content="https://udgwebdev.com/images/nodejs-logo.jpg"/><link rel="manifest" href="/manifest.json"/><link rel="stylesheet" href="/assets/css/main.css" type="text/css"/><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/><link rel="canonical" href="https://udgwebdev.com/otimizando-aplicacoes-nodejs"/></head><body><nav role="navigation" class="navbar navbar-inverse navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand"><img src="/images/udgwebdev-logo.png" alt="Underground WebDev" width="48" class="navbar-logo"/></a></div><div class="navbar-right navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href="/nodejs"><i class="fa fa-code"></i>&nbsp;Node.js</a></li><li><a href="/meteor"><i class="fa fa-code"></i>&nbsp;Meteor</a></li><li><a href="/dicas-de-terminal"><i class="fa fa-terminal"></i>&nbsp;Terminal</a></li></ul></div></div></nav><nav role="navigation" class="c-circle-menu js-menu"><button class="c-circle-menu__toggle js-menu-toggle"><span>Toggle</span></button><ul class="c-circle-menu__items"><li class="c-circle-menu__item"><a href="http://feeds.feedburner.com/UndergroundWebDev" target="_blank" rel="nofollow" title="Feed" class="c-circle-menu__link"><i class="icon fa fa-rss"></i></a></li><li class="c-circle-menu__item"><a href="https://github.com/caio-ribeiro-pereira" target="_blank" rel="nofollow" title="Github" class="c-circle-menu__link"><i class="icon fa fa-github"></i></a></li><li class="c-circle-menu__item"><a href="https://www.facebook.com/udgwebdev" target="_blank" rel="nofollow" title="Fanpage" class="c-circle-menu__link"><i class="icon fa fa-facebook-square"></i></a></li><li class="c-circle-menu__item"><a href="http://twitter.com/crp_underground" target="_blank" rel="nofollow" title="Twitter" class="c-circle-menu__link"><i class="icon fa fa-twitter-square"></i></a></li><li class="c-circle-menu__item"><a href="https://www.linkedin.com/in/caioribeiropereira" target="_blank" rel="nofollow" title="LinkedIn" class="c-circle-menu__link"><i class="icon fa fa-linkedin-square"></i></a></li></ul><div class="c-circle-menu__mask js-menu-mask"></div></nav><main role="main" class="container vertical-centralization"><div class="row"><article id="otimizando-aplicacoes-nodejs" class="col-xs-12 col-sm-9 post"><h1>Otimizando aplicações Node.js</h1><p class="text-muted">Publicação: <time datetime="13/01/2015" pubdate><b>13/01/2015</b></time> | Tags: <a href="/menu/#node.js" rel="me" title="Menu: Node.js">Node.js</a></p><p><img src="/images/nodejs-logo.jpg" alt="Otimizando aplicações Node.js" title="Otimizando aplicações Node.js"></p>
<p>Neste post apresentarei 10 dicas extremamente úteis para você aplicar em uma aplicação Node.js em produção.</p>
<h2>Use ao máximo as funções assíncronas</h2><p>O ponto forte do Node.js é a execução de funções assíncronas, porém mais importante que isso é saber quando e onde implementá-las. Para isso, utilize funções assíncronas que vão fazer <strong>I/O no servidor</strong>, pois elas vão executar <strong>I/Os não-bloqueantes</strong> que evitam deixar a CPU ociosa enquanto um I/O é executado. Para um servidor web esse recurso vai possibilitar que enquanto uma requisição realiza I/O, outras requisições continuem sendo processadas pela CPU, incluindo também a execução de outros <strong>I/Os em simultâneo</strong>.</p>
<h2>Use o módulo async para organizar funções assíncronas</h2><p>O grande problema de funções assíncronas é que em muitos casos surge a necessidade de encadear múltiplas funções assíncronas através de seus callbacks. Quanto maior o encadeamento, mais complexo ficará seu código, gerando o <strong>famoso callback hell</strong>. Para lidar com esse problema você pode seguir as dicas desse post: <a href="http://udgwebdev.com/evitando-callback-hell-no-node-js">Evitando Callback Hell no Node.js</a> ou você pode usar um módulo muito popular chamado <a href="https://github.com/caolan/async">async</a> que permite organizar esses callbacks, além de permitir que você controle o fluxo de execução dessas funções assíncronas.</p>
<h2>Com o async também é possível paralelizar funções assíncronas</h2><p>O módulo async possui uma função muito útil que permite organizar o fluxo de funções assíncronas para serem executadas em paralelo. Basta usar função é <a href="https://github.com/caolan/async#parallel">async.parallel()</a>.</p>
<h2>Habilite compactação gzip em seu app Express</h2><p>Se você usa o Express como servidor web, você pode instalar o middleware <a href="https://github.com/expressjs/compression">compression</a> para compactar as requisições das rotas da aplicação. Isso diminuirá o tamanho de bytes trafegado e consequentemente aumentará a velocidade de resposta das requisições.</p>
<h2>Servidor envia dados e o cliente renderiza-os</h2><p>Servidores Node.js são performáticos quando suas rotas enviam apenas dados ao invés de retornar uma página HTML inteira, o Node.js se tornou muito popular como plataforma de criação de APIs por causa dessa performance, por isso é recomendado criar projeto de APIs com Node.js e projetos de front-end a parte para consumir dados da API. Isso vai demandar menos processamento de páginas HTML em um servidor Node.js, tornando-o mais veloz as respostas de cada requisição.</p>
<h2>Evite trabalhar com cookies e sessions</h2><p>Trabalhar com cookies e sessions não é proibido, porém seu servidor Node terá que processar essa camada extra. Se você esta criando uma API Node.js, o uso de cookie e sessions se torna desnecessário, visto que Sessions e Cookies no servidor exige um processamento extra para guardar estados.</p>
<h2>Deixe o Nginx ou Apache servir arquivos estáticos</h2><p>Evite deixar o Node.js servir arquivos estáticos, pois servidores como Nginx e Apache trabalham bem melhor com esses arquivos e é possível configurá-lo para trabalhar integrado com o Node.js. Se você usa Nginx e gostaria de integrá-lo com sua aplicação Node.js, veja neste blog o post: <a href="http://udgwebdev.com/nginx-servindo-nodejs/">Nginx servindo Node.js</a>. Outra vantagem desses servidores é que eles possuem várias opções de configuração para servir arquivos estáticos, incluindo também um mecanismo de cache para esses arquivos. Seguindo essa dica você elimina um overhead em sua aplicação Node, deixando-a mais focada em processar e servir dados.</p>
<h2>Utilize o módulo cluster para processamento paralelo</h2><p>O módulo <a href="http://nodejs.org/api/cluster.html">cluster</a> é nativo do Node.js e basicamente ele permite criar vários processos da mesma aplicação, incluindo um <strong>processo master</strong> que se responsabiliza em balancear a carga de processamento entre os demais <strong>processos slaves</strong>. Dessa forma você otimiza sua aplicação permitindo a execução de múltiplas tarefas em paralelo em um servidor.</p>
<h2>Faça Streaming nos responses do HTTP</h2><p>O uso do <a href="http://nodejs.org/api/stream.html">stream</a> que também é nativo do Node.js permite que requisições de tamanhos grandes sejam processados em pedaços. Isso evita o estouro de buffer no servidor ao processar grandes massas de dados. Um grande exemplo de uso de Streming são os servidores video ou audio, ambos trabalham com arquivos pesados e somente via streaming seu processamento se torna viável para um cliente.</p>
<h2>Sempre use a última versão do Node.js</h2><p>Essa dica parece clichê, mas por experiência própria o uso das últimas versões do Node.js tem dado melhores resultados em questão de consumo de memória e CPU. Isso ocorre por que elas trazem junto uma versão mais recente do <a href="https://code.google.com/p/v8/">runtime V8 do JavaScript</a>. Até mesmo o uso de <strong>versões unstable</strong> (que são versões experimentais) são válidas pois elas usam versões do V8 mais recentes do que as versões stable do Node.js, porém o risco de usá-las em produção fica por sua conta! Afinal bugs inesperados podem acontecer em seu app usando essas versões experimentais. Mas em geral, sempre use a última versão do node.js em suas aplicações.</p>
<h4>Fontes:</h4><p>#### </p>
<ul>
<li><a href="http://strongloop.com/node-js/node-js-performance-tips/">StrongLoop: Node.js Performance Tips</a></li>
<li><a href="http://www.sitepoint.com/10-tips-make-node-js-web-app-faster/">Sitepoint: 10 Tips to make your Node.js web app faster</a></li>
<li><a href="http://engineering.linkedin.com/nodejs/blazing-fast-nodejs-10-performance-tips-linkedin-mobile">LinkedIn: Blazing fast Node.js 10 performance tips</a></li>
</ul><div id="disqus_thread"></div><script async="async" defer="defer">(function() {
  var disqus_shortname = 'udgwebdev';
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript>Por favor, habilite o JavaScript no seu browser para visualizar os comentários deste post.</noscript><script type="application/ld+json">{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Otimizando aplicações Node.js",
  "image": "https://udgwebdev.com/images/nodejs-logo.jpg",
  "publisher": "Underground WebDev",
  "url": "https://udgwebdev.com/otimizando-aplicacoes-nodejs",
  "datePublished": "2015-01-13",
  "dateCreated": "2015-01-13",
  "description": "Neste post apresentarei 10 dicas extremamente úteis para você aplicar em uma aplicação Node.js em produção.",
  "author": {
    "@type": "Person",
    "name": "Caio Ribeiro Pereira"
  }
}</script></article></div></main><footer class="footer text-center"><p><small><i class="fa fa-trophy"></i>&nbsp;Powered by <a href="https://pages.github.com" rel="nofollow" target="_blank" title="Github Pages">Github Pages</a>, <a href="http://gruntjs.com" rel="nofollow" target="_blank" title="Grunt">Grunt</a> and <a href="http://harpjs.com" rel="nofollow" target="_blank" title="Harp.js">Harp.js</a>.</small><br/><small>Autor: <a href="https://crpwebdev.github.io" rel="me" target="_blank" title="Caio Ribeiro Pereira">Caio Ribeiro Pereira</a>.</small></p></footer><script src="/assets/js/circlemenu.min.js"></script><script src="/assets/js/main.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-25728091-2', 'auto');
ga('send', 'pageview');</script></body></html>