<!DOCTYPE html><html lang="en" manifest="/manifest.appcache" xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"><head><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/><meta charset="utf-8"/><title>Escrevendo JavaScript melhor - Parte 1 | Underground WebDev</title><meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#BA2D27"/><meta name="apple-mobile-web-app-title" content="UDGWebDev"/><meta name="msapplication-TileImage" content="https://udgwebdev.com/images/undefined-128.png"/><meta name="msapplication-TileColor" content="#BA2D27"/><meta name="msapplication-tap-highlight" content="no"/><meta name="mobile-web-app-capable" content="yes"/><meta name="application-name" content="UDGWebDev"/><meta name="theme-color" content="#BA2D27"/><meta name="title" content="Escrevendo JavaScript melhor - Parte 1"/><meta name="author" content="Caio Ribeiro Pereira"/><meta name="description" content="Esse post visa mostrar na prática como melhorar algumas gambiarras clássicas de se encontrar em qualquer projeto legado que utiliza JavaScript."/><meta property="og:title" content="Escrevendo JavaScript melhor - Parte 1"/><meta property="og:description" content="Esse post visa mostrar na prática como melhorar algumas gambiarras clássicas de se encontrar em qualquer projeto legado que utiliza JavaScript."/><meta property="og:url" content="https://udgwebdev.com/escrevendo-javascript-melhor-parte-1"/><meta property="og:site_name" content="Underground WebDev"/><meta property="og:image" content="https://udgwebdev.com/images/es6-logo.jpg"/><meta property="og:type" content="website"/><meta property="article:author" content="https://plus.google.com/+CaioRibeiroPereira"/><meta property="article:section" content="main"/><meta name="twitter:creator" content="@crp_underground"/><meta name="twitter:card" content="summary"/><meta name="twitter:url" content="https://udgwebdev.com/escrevendo-javascript-melhor-parte-1"/><meta name="twitter:title" content="Escrevendo JavaScript melhor - Parte 1"/><meta name="twitter:description" content="Esse post visa mostrar na prática como melhorar algumas gambiarras clássicas de se encontrar em qualquer projeto legado que utiliza JavaScript."/><meta name="twitter:image" content="https://udgwebdev.com/images/es6-logo.jpg"/><link rel="manifest" href="/manifest.json"/><link rel="stylesheet" href="/assets/css/main.css" type="text/css"/><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/><link rel="canonical" href="https://udgwebdev.com/escrevendo-javascript-melhor-parte-1"/></head><body><nav role="navigation" class="navbar navbar-inverse navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand"><img src="/images/udgwebdev-logo.png" alt="Underground WebDev" width="48" class="navbar-logo"/></a></div><div class="navbar-right navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href="/nodejs"><i class="fa fa-code"></i>&nbsp;Node.js</a></li><li><a href="/meteor"><i class="fa fa-code"></i>&nbsp;Meteor</a></li><li><a href="/dicas-de-terminal"><i class="fa fa-terminal"></i>&nbsp;Terminal</a></li></ul></div></div></nav><nav role="navigation" class="c-circle-menu js-menu"><button class="c-circle-menu__toggle js-menu-toggle"><span>Toggle</span></button><ul class="c-circle-menu__items"><li class="c-circle-menu__item"><a href="http://feeds.feedburner.com/UndergroundWebDev" target="_blank" rel="nofollow" title="Feed" class="c-circle-menu__link"><i class="icon fa fa-rss"></i></a></li><li class="c-circle-menu__item"><a href="https://github.com/caio-ribeiro-pereira" target="_blank" rel="nofollow" title="Github" class="c-circle-menu__link"><i class="icon fa fa-github"></i></a></li><li class="c-circle-menu__item"><a href="https://www.facebook.com/udgwebdev" target="_blank" rel="nofollow" title="Fanpage" class="c-circle-menu__link"><i class="icon fa fa-facebook-square"></i></a></li><li class="c-circle-menu__item"><a href="http://twitter.com/crp_underground" target="_blank" rel="nofollow" title="Twitter" class="c-circle-menu__link"><i class="icon fa fa-twitter-square"></i></a></li><li class="c-circle-menu__item"><a href="https://www.linkedin.com/in/caioribeiropereira" target="_blank" rel="nofollow" title="LinkedIn" class="c-circle-menu__link"><i class="icon fa fa-linkedin-square"></i></a></li></ul><div class="c-circle-menu__mask js-menu-mask"></div></nav><main role="main" class="container vertical-centralization"><div class="row"><article id="escrevendo-javascript-melhor-parte-1" class="col-xs-12 col-sm-9 post"><h1>Escrevendo JavaScript melhor - Parte 1</h1><p class="text-muted">Publicação: <time datetime="02/06/2016" pubdate><b>02/06/2016</b></time> | Tags: <a href="/menu/#javascript" rel="me" title="Menu: JavaScript">JavaScript</a></p><p><img src="/images/es6-logo.jpg" alt="Escrevendo JavaScript melhor" title="Escrevendo JavaScript melhor"></p>
<p>Esse post visa mostrar na prática como melhorar algumas gambiarras ou bad codes clássicas de se encontrar em qualquer projeto legado JavaScript.</p>
<p>Com certeza você já deve ter visto ou escrito alguns dos códigos abaixo, e simplesmente não fez um refactoring nele, seja por falta de tempo, ou principalmente pelo fato de não conhecer uma forma mais elegante.</p>
<h3>1) Mapeando arrays</h3><p>Acredito que esse exemplo é o mais clássico de todos, e o cenário é o seguinte: você tem um array de objetos com tamanho X e precisa gerar um novo array com mesmo tamanho, porém aplicando novos campos nesses objetos, modificando alguns dos campos atuais ou caso seja um array de dados primitivos (String, Number ou Date) você precisa, por exemplo, calcular o valor de cada item do array. Se você já se deparou com esse cenário alguma vez na vida, provavelmente você já viu ou fez um código semelhante a este:</p>
<pre><code class="language-javascript"> // Esse código basicamente vai multiplicar por 3 cada valor do array scores
 var scores = [2, 4, 6, 8, 10];
 var newScores = [];
 for(var i = 0; i &lt; scores.length; i++) {
     newScores.push(scores[i] * 3);
 }
 console.log(newScores); // [6, 12, 18, 24, 30]
</code></pre>
<p>Nesse caso, foi necessário criar um novo array e um loop que percorreu todos os items do primeiro array (<code>scores</code>) para calcular os valores e em seguida inserir seus resultados dentro do array <code>newScores</code>. Mas existe uma forma mais elegante para isso, a solução é usar a função <code>Array.prototype.map()</code>, veja como fica:</p>
<pre><code class="language-javascript"> var scores = [2, 4, 6, 8, 10];
 var newScores = scores.map(score =&gt; score * 3);
 console.log(newScores); // [6, 12, 18, 24, 30]
</code></pre>
<h3>2) Interpolando dados em uma string</h3><p>Essa é outra clássica, que graças ao ES6 já é possível aplicar concatenação de dados com strings de forma mais elegante, provavelmente você já deve ter visto muito um código parecido com esse:</p>
<pre><code class="language-javascript"> var name = &quot;John Connor&quot;;
 var message = &quot;I came from future!&quot;;
 var template = &quot;&lt;p&gt;&quot;;
 template += &quot;&lt;h3&gt;&quot;+ name + &quot;&lt;/h3&gt;&quot;;
 template += &quot;&lt;span&gt;&quot;+ message + &quot;&lt;/span&gt;&quot;;
 template += &quot;&lt;/p&gt;&quot;;
</code></pre>
<p>Hoje já é possível trabalhar com Template Strings do ES6, permitindo interpolar dados com strings de forma mais elegante, sem precisar concatenar strings utilizando operador &quot;+&quot;, veja como fazer isso:</p>
<pre><code class="language-javascript"> var name = &quot;John Connor&quot;;
 var message = &quot;I came from future!&quot;;
 var template = `
 &lt;p&gt;
    &lt;h3&gt;${name}&lt;/h3&gt;
    &lt;span&gt;${message}&lt;/span&gt;
 &lt;/p&gt;`;
</code></pre>
<h3>3) Calculando médias</h3><p>Fazer cálculos de média, em muitos casos você já deve ter visto códigos parecidos como esse:</p>
<pre><code class="language-javascript"> var scores = [1, 4, 6, 8];
 var result = 0;
 for (var i = 0; i &lt; scores.length; i++) {
   result += scores[i];
 }
 result = result / scores.length;
 console.log(result); // 4.75
</code></pre>
<p>Nesse caso, você pode deixar o código mais enxuto aplicando a função <code>reduce()</code> e no final aplicar a divisão do resultado obtido pelo <code>reduce()</code> com tamanho do array de scores, veja:</p>
<pre><code class="language-javascript"> var scores = [1, 4, 6, 8];
 var result = scores.reduce((total, score) =&gt; total + score) / scores.length;
 console.log(result); // 4.75
</code></pre>
<p>Veja também:</p>
<ul>
<li><a href="/escrevendo-javascript-melhor-parte-2" title="Escrevendo JavaScript melhor - Parte 2">Escrevendo JavaScript melhor - Parte 2</a></li>
<li><a href="/escrevendo-javascript-melhor-parte-3" title="Escrevendo JavaScript melhor - Parte 3">Escrevendo JavaScript melhor - Parte 3</a></li>
<li><a href="/escrevendo-javascript-melhor-parte-4" title="Escrevendo JavaScript melhor - Parte 4">Escrevendo JavaScript melhor - Parte 4</a></li>
</ul>
<p>Caso você conheça algum código legado com dicas sobre como escrevê-lo melhor comente abaixo! Valeu!</p><div id="disqus_thread"></div><script async="async" defer="defer">(function() {
  var disqus_shortname = 'udgwebdev';
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript>Por favor, habilite o JavaScript no seu browser para visualizar os comentários deste post.</noscript><script type="application/ld+json">{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Escrevendo JavaScript melhor - Parte 1",
  "image": "https://udgwebdev.com/images/es6-logo.jpg",
  "publisher": "Underground WebDev",
  "url": "https://udgwebdev.com/escrevendo-javascript-melhor-parte-1",
  "datePublished": "2016-06-02",
  "dateCreated": "2016-06-02",
  "description": "Esse post visa mostrar na prática como melhorar algumas gambiarras clássicas de se encontrar em qualquer projeto legado que utiliza JavaScript.",
  "author": {
    "@type": "Person",
    "name": "Caio Ribeiro Pereira"
  }
}</script></article></div></main><footer class="footer text-center"><p><small><i class="fa fa-trophy"></i>&nbsp;Powered by <a href="https://pages.github.com" rel="nofollow" target="_blank" title="Github Pages">Github Pages</a>, <a href="http://gruntjs.com" rel="nofollow" target="_blank" title="Grunt">Grunt</a> and <a href="http://harpjs.com" rel="nofollow" target="_blank" title="Harp.js">Harp.js</a>.</small><br/><small>Autor: <a href="https://crpwebdev.github.io" rel="me" target="_blank" title="Caio Ribeiro Pereira">Caio Ribeiro Pereira</a>.</small></p></footer><script src="/assets/js/circlemenu.min.js"></script><script src="/assets/js/main.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-25728091-2', 'auto');
ga('send', 'pageview');</script></body></html>